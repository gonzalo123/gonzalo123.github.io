<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  

  <title>mixin dojo and google api libraries</title>
  <meta name="description" content="I’m working in a dojo application and I also need to use some goolge api like feeds, maps and books. Dojo is very versatile adding new components using dojo.require. when all dojo components are loaded dojo.addOnLoad callback is fired.

">
  <meta name="author" content="Gonzalo Ayuso">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="mixin dojo and google api libraries">
  <meta name="twitter:description" content="I’m working in a dojo application and I also need to use some goolge api like feeds, maps and books. Dojo is very versatile adding new components using dojo.require. when all dojo components are loaded dojo.addOnLoad callback is fired.

">
  
  <meta name="twitter:creator" content="gonzalo123">
  
  <meta name="twitter:image" content="/images/favicons/favicon-194x194.png" />

  <meta property="og:type" content="article">
  <meta property="og:title" content="mixin dojo and google api libraries">
  <meta property="og:description" content="I’m working in a dojo application and I also need to use some goolge api like feeds, maps and books. Dojo is very versatile adding new components using dojo.require. when all dojo components are loaded dojo.addOnLoad callback is fired.

">
  <meta property="og:image" content="/images/favicons/favicon-194x194.png" />

  <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">
  
  <link rel="stylesheet" href="/css/main.css?1617370051600365000">
  <link rel="canonical" href="http://localhost:4000/2009/04/18/mixin-dojo-and-google-api-libraries/">
  <link rel="alternate" type="application/rss+xml" title="Gonzalo Ayuso Web Architect" href="/feed.xml">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover panel-cover--collapsed"
        style="background-image: url(/images/cover.jpg)">
    <div class="panel-main">

        <div class="panel-main__inner panel-inverted">
            <div class="panel-main__content">
                <a href="/" title="link to home of Gonzalo Ayuso Web Architect">
                    <img src="/images/profile.jpg" class="user-image" alt="My Profile Photo">
                    <h1 class="panel-cover__title panel-title">Gonzalo Ayuso Web Architect</h1>
                </a>
                <hr class="panel-cover__divider">
                <p class="panel-cover__description">Web Architect. Personal technical blog since 2008</p>
                <div class="navigation-wrapper">

                    <nav class="cover-navigation navigation--social">
                        <ul class="navigation">
                            
                            <!-- Twitter -->
                            <li class="navigation__item">
                                <a href="http://twitter.com/gonzalo123"
                                   title="@gonzalo123 on Twitter" target="_blank">
                                    <i class="icon icon-social-twitter"></i>
                                    <span class="label">Twitter</span>
                                </a>
                            </li>
                            

                            
                            <!-- LinkedIn -->
                            <li class="navigation__item">
                                <a href="https://www.linkedin.com/in/gonzaloayuso"
                                   title="gonzaloayuso on LinkedIn" target="_blank">
                                    <i class="icon icon-social-linkedin"></i>
                                    <span class="label">LinkedIn</span>
                                </a>
                            </li>
                            

                            
                            <!-- GitHub -->
                            <li class="navigation__item">
                                <a href="https://www.github.com/gonzalo123"
                                   title="gonzalo123 on GitHub" target="_blank">
                                    <i class="icon icon-social-github"></i>
                                    <span class="label">GitHub</span>
                                </a>
                            </li>
                            

                            
                            <!-- Email -->
                            <li class="navigation__item">
                                <a href="mailto:gonzalo123@gmail.com" title="Email gonzalo123@gmail.com"
                                   target="_blank">
                                    <i class="icon icon-mail"></i>
                                    <span class="label">Email</span>
                                </a>
                            </li>
                            

                            <!-- RSS -->
                            <li class="navigation__item">
                                <a href="/feed.xml" title="Subscribe" target="_blank">
                                    <i class="icon icon-rss"></i>
                                    <span class="label">RSS</span>
                                </a>
                            </li>

                        </ul>
                    </nav>
                    <div>
    <a href="https://leanpub.com/codigosolido"
       rel="noreferrer"
       data-ss1617366980="1">
        <img src="/assets/images/codigoSolido.png" alt="Código Sólido">
    </a>
    <p><i>Buy my book (Spanish) on Leanpub. (It's free but if you pay I'll donate all profits)</i></p>
</div>

                    <form method="get" action="http://www.google.com/search" target="_blank">
    <input type="hidden" name="sitesearch" value="ibkc-carrosserie.nl"/>
    <input type="text" name="q" maxlength="255" placeholder="Search with Google"/>
</form>


                </div>

            </div>

        </div>

        <div class="panel-cover--overlay"></div>
    </div>
</header>

    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2009-04-18 00:00" class="post-meta__date date">18 Apr 2009</time>
      
      &#8226; <span class="post-meta__tags">on <a href="/tags/#dojo">dojo</a>, <a href="/tags/#technology">technology</a>, <a href="/tags/#web-development">web-development</a></span>
      
    </div>
    <h1 class="post-title">mixin dojo and google api libraries</h1>
  </header>

  <section class="post">
    <p>I’m working in a dojo application and I also need to use some goolge api like feeds, maps and books. Dojo is very versatile adding new components using dojo.require. when all dojo components are loaded dojo.addOnLoad callback is fired.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dojo.io.script</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dojo.data.ItemFileReadStore</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">all is ready</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>dojo.require is great. It also alloy us to create nested onLoad callbacks</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dojo.io.script</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dojo.data.ItemFileReadStore</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>  <span class="c1">// &amp;lt;------------</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">all is ready1</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dijit.TitlePane</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dijit.Dialog</span><span class="dl">"</span><span class="p">);</span>

    <span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="c1">// &amp;lt;------------</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">all is ready 2</span><span class="dl">'</span><span class="p">);</span>
     <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>google API uses his own loader google.load.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">google</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">"</span><span class="s2">jquery</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1.3.2</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">google</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">"</span><span class="s2">feeds</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">google</span><span class="p">.</span><span class="nx">setOnLoadCallback</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">all is ready</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If your application uses both libraries you must take care about onLoad callback of dojo and google because they are not the same. You can create your own dojo widget for loading google api and forget google.setOnLoadCallback but I want to use libraries as standard as I can (without hacking code every time I have a problem). So I prefer to live with both callbacks. You can try to do something like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">google</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">"</span><span class="s2">dojo</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1.3</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">google</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">"</span><span class="s2">feeds</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dijit.layout.BorderContainer</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dijit.layout.TabContainer</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dijit.layout.ContentPane</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// start dojo application</span>
<span class="p">});</span>
</code></pre></div></div>

<p>This code will work but sometimes will crash. Then you press F5 and all works. As far as I know you can’t do nested onLoad callbacks with google (it’s a pity), so first you must load google api and load dojo components when google api is ready So it’s better to use this other version of code:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">google</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">"</span><span class="s2">dojo</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1.3</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">google</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">"</span><span class="s2">feeds</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">google</span><span class="p">.</span><span class="nx">setOnLoadCallback</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dijit.layout.BorderContainer</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dijit.layout.TabContainer</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dijit.layout.ContentPane</span><span class="dl">"</span><span class="p">);</span>

    <span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="c1">// start dojo application</span>
    <span class="p">});</span>

<span class="p">});</span>
</code></pre></div></div>



  </section>
  <p>
    <div class="page-share">
  <a href="https://twitter.com/intent/tweet?text=mixin+dojo+and+google+api+libraries%20http%3A%2F%2Flocalhost%3A4000%2F2009%2F04%2F18%2Fmixin-dojo-and-google-api-libraries%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--twitter btn--small"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> <span>Tweet</span></a>
  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2F2009%2F04%2F18%2Fmixin-dojo-and-google-api-libraries%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--linkedin btn--small"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> <span>LinkedIn</span></a>
  <a href="https://reddit.com/submit?title=mixin+dojo+and+google+api+libraries&url=http%3A%2F%2Flocalhost%3A4000%2F2009%2F04%2F18%2Fmixin-dojo-and-google-api-libraries%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--reddit btn--small"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i> <span>Reddit</span></a>
</div>

  </p>
  <section id="disqus_thread"></section><!-- /#disqus_thread -->
</article>

    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'http://localhost:4000/2009/04/18/mixin-dojo-and-google-api-libraries/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = '/2009/04/18/mixin-dojo-and-google-api-libraries'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };

      (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//gonzalo123-com.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
       })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2021 Gonzalo Ayuso. All rights reserved.</span>
</footer>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="/js/main.js?1617370051600365000"></script>


    </div>
  </body>
</html>
