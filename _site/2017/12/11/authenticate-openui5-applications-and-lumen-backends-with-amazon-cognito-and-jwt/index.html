<!DOCTYPE html>
<html>
  <head>
    

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    

    <title>Authenticate OpenUI5 applications and Lumen backends with Amazon Cognito and JWT</title>
    <meta name="description"
          content="Today I want to create an UI5/OpenUI5 boilerplate that plays with Lumen backends. Simple, isn’t it? We only need to create a Lumen API server and connect our OpenUI5 application with this API server. But today I also want to create a Login also. The typical user/password input form. I don’t want to build it from scratch (a user database, oauth provider or something like that). Since this days I’m involved with Amazon AWS projects I want to try Amazon Cognito.

">
    <meta name="author" content="Gonzalo Ayuso">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Authenticate OpenUI5 applications and Lumen backends with Amazon Cognito and JWT">
    <meta name="twitter:description"
          content="Today I want to create an UI5/OpenUI5 boilerplate that plays with Lumen backends. Simple, isn’t it? We only need to create a Lumen API server and connect our OpenUI5 application with this API server. But today I also want to create a Login also. The typical user/password input form. I don’t want to build it from scratch (a user database, oauth provider or something like that). Since this days I’m involved with Amazon AWS projects I want to try Amazon Cognito.

">
    
    <meta name="twitter:creator" content="gonzalo123">
    
    <meta name="twitter:image" content="/images/favicons/favicon-194x194.png"/>

    <meta property="og:type" content="article">
    <meta property="og:title" content="Authenticate OpenUI5 applications and Lumen backends with Amazon Cognito and JWT">
    <meta property="og:description"
          content="Today I want to create an UI5/OpenUI5 boilerplate that plays with Lumen backends. Simple, isn’t it? We only need to create a Lumen API server and connect our OpenUI5 application with this API server. But today I also want to create a Login also. The typical user/password input form. I don’t want to build it from scratch (a user database, oauth provider or something like that). Since this days I’m involved with Amazon AWS projects I want to try Amazon Cognito.

">
    <meta property="og:image" content="/images/favicons/favicon-194x194.png"/>

    <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-194x194.png" sizes="194x194">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png"
          sizes="192x192">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicons/manifest.json">
    <link rel="shortcut icon" href="/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="/css/main.css?1617475232680250000">
    <link rel="canonical"
          href="/2017/12/11/authenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt/">
    <link rel="alternate" type="application/rss+xml" title="Gonzalo Ayuso" href="/feed.xml">
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Authenticate OpenUI5 applications and Lumen backends with Amazon Cognito and JWT | Gonzalo Ayuso</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Authenticate OpenUI5 applications and Lumen backends with Amazon Cognito and JWT" />
<meta name="author" content="Gonzalo Ayuso" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Today I want to create an UI5/OpenUI5 boilerplate that plays with Lumen backends. Simple, isn’t it? We only need to create a Lumen API server and connect our OpenUI5 application with this API server. But today I also want to create a Login also. The typical user/password input form. I don’t want to build it from scratch (a user database, oauth provider or something like that). Since this days I’m involved with Amazon AWS projects I want to try Amazon Cognito." />
<meta property="og:description" content="Today I want to create an UI5/OpenUI5 boilerplate that plays with Lumen backends. Simple, isn’t it? We only need to create a Lumen API server and connect our OpenUI5 application with this API server. But today I also want to create a Login also. The typical user/password input form. I don’t want to build it from scratch (a user database, oauth provider or something like that). Since this days I’m involved with Amazon AWS projects I want to try Amazon Cognito." />
<link rel="canonical" href="/2017/12/11/authenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt/" />
<meta property="og:url" content="/2017/12/11/authenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt/" />
<meta property="og:site_name" content="Gonzalo Ayuso" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-12-11T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Authenticate OpenUI5 applications and Lumen backends with Amazon Cognito and JWT" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"/2017/12/11/authenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt/"},"url":"/2017/12/11/authenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt/","author":{"@type":"Person","name":"Gonzalo Ayuso"},"description":"Today I want to create an UI5/OpenUI5 boilerplate that plays with Lumen backends. Simple, isn’t it? We only need to create a Lumen API server and connect our OpenUI5 application with this API server. But today I also want to create a Login also. The typical user/password input form. I don’t want to build it from scratch (a user database, oauth provider or something like that). Since this days I’m involved with Amazon AWS projects I want to try Amazon Cognito.","dateModified":"2017-12-11T00:00:00+01:00","datePublished":"2017-12-11T00:00:00+01:00","headline":"Authenticate OpenUI5 applications and Lumen backends with Amazon Cognito and JWT","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <body>

    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover panel-cover--collapsed"
        style="background-image: url(/images/cover.jpg)">
    <div class="panel-main">
        <div class="panel-main__inner panel-inverted">
            <div class="panel-main__content">
                <a href="/" title="link to home of Gonzalo Ayuso">
                    <img src="/images/profile.jpg" class="user-image" alt="My Profile Photo">
                    <h1 class="panel-cover__title panel-title">Gonzalo Ayuso</h1>
                    <h3 class="panel-cover__title panel-title"><i>Web Architect</i></h3>
                </a>
                <div class="navigation-wrapper">
                    <h3 class="panel-cover__title panel-title"><i>Personal blog since 2008</i></h3>
                    <nav class="cover-navigation navigation--social">
                        <nav class="cover-navigation">
                            <ul class="navigation">
                                <li class="navigation__item">
                                    <a href="/about" title="about">
                                        <span>About Me</span>
                                    </a>
                                </li>
                                <li class="navigation__item">
                                    <a href="/search" title="search">
                                        <span>Search</span>
                                    </a>
                                </li>

                            </ul>
                        </nav>
                        <hr class="panel-cover__divider">
                        <ul class="navigation">
    
    <!-- Twitter -->
    <li class="navigation__item">
        <a href="http://twitter.com/gonzalo123"
           title="@gonzalo123 on Twitter" target="_blank">
            <i class="icon icon-social-twitter"></i>
            <span class="label">Twitter</span>
        </a>
    </li>
    

    
    <!-- LinkedIn -->
    <li class="navigation__item">
        <a href="https://www.linkedin.com/in/gonzaloayuso"
           title="gonzaloayuso on LinkedIn" target="_blank">
            <i class="icon icon-social-linkedin"></i>
            <span class="label">LinkedIn</span>
        </a>
    </li>
    

    
    <!-- GitHub -->
    <li class="navigation__item">
        <a href="https://www.github.com/gonzalo123"
           title="gonzalo123 on GitHub" target="_blank">
            <i class="icon icon-social-github"></i>
            <span class="label">GitHub</span>
        </a>
    </li>
    

    
    <!-- Email -->
    <li class="navigation__item">
        <a href="mailto:gonzalo123@gmail.com" title="Email gonzalo123@gmail.com"
           target="_blank">
            <i class="icon icon-mail"></i>
            <span class="label">Email</span>
        </a>
    </li>
    

    <!-- RSS -->
    <li class="navigation__item">
        <a href="/feed.xml" title="Subscribe" target="_blank">
            <i class="icon icon-rss"></i>
            <span class="label">RSS</span>
        </a>
    </li>

</ul>

                    </nav>
                    <div>
    <a href="/book">
        <img src="/assets/images/codigoSolido.png" alt="Código Sólido">
    </a>
</div>

                </div>

            </div>

        </div>

        <div class="panel-cover--overlay"></div>
    </div>
</header>

    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
    <header class="post-header">
        <div class="post-meta">
            <time datetime=" 2017-12-11 00:00
            " class="post-meta__date date">11 Dec 2017</time>
            
            &#8226; <span class="post-meta__tags">on <a
                href="/tags/#amazon">amazon</a>, <a
                href="/tags/#cognito">cognito</a>, <a
                href="/tags/#javascript">javascript</a>, <a
                href="/tags/#openui5">openui5</a>, <a
                href="/tags/#php">php</a>, <a
                href="/tags/#symfony">symfony</a></span>
            
        </div>
        <h1 class="post-title">Authenticate OpenUI5 applications and Lumen backends with Amazon Cognito and JWT</h1>
    </header>

    <section class="post">
        <p>Today I want to create an <a href="https://sapui5.hana.ondemand.com/">UI5/OpenUI5</a> boilerplate that plays with Lumen backends. Simple, isn’t it? We only need to create a <a href="https://lumen.laravel.com/">Lumen</a> API server and connect our OpenUI5 application with this API server. But today I also want to create a Login also. The typical user/password input form. I don’t want to build it from scratch (a user database, oauth provider or something like that). Since this days I’m involved with Amazon AWS projects I want to try <a href="https://aws.amazon.com/cognito/">Amazon Cognito</a>.</p>

<p>Cognito has a great javaScript <a href="https://github.com/aws/amazon-cognito-identity-js">SDK</a>. In fact we can do all the <a href="http://docs.aws.amazon.com/cognito/latest/developerguide/using-amazon-cognito-user-identity-pools-javascript-examples.html">authentication flow</a> (create users, validate passwords, change password, multifactor authentication, …) with Cognito. To create this project first I’ve create the following steps within Amazon AWS Cognito Console: Create a user pool with required attributes (email only in this example), without MFA and only allow administrators to create users. I’ve also created a App client inside this pool, so I’ve got a UserPoolId and a ClientId.</p>

<p>Let’s start with the OpenUI5 application. I’ve created an small application with one route called “home”. To handle the login process I will work in Component.js init function. The idea is check the cognito session. If there’s an active one (that’s means a Json Web Token stored in the local storage) we’ll display to “home” route and if there isn’t we’ll show login one.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">define</span><span class="p">([</span>
        <span class="dl">"</span><span class="s2">sap/ui/core/UIComponent</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">sap/ui/Device</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">app/model/models</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">app/model/cognito</span><span class="dl">"</span>
    <span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">UIComponent</span><span class="p">,</span> <span class="nx">Device</span><span class="p">,</span> <span class="nx">models</span><span class="p">,</span> <span class="nx">cognito</span><span class="p">)</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>
 
        <span class="k">return</span> <span class="nx">UIComponent</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">app.Component</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
 
            <span class="na">metadata</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">manifest</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span>
            <span class="p">},</span>
 
            <span class="na">init</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">UIComponent</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">setModel</span><span class="p">(</span><span class="nx">models</span><span class="p">.</span><span class="nx">createDeviceModel</span><span class="p">(),</span> <span class="dl">"</span><span class="s2">device</span><span class="dl">"</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">getRouter</span><span class="p">().</span><span class="nx">initialize</span><span class="p">();</span>
 
                <span class="kd">var</span> <span class="nx">targets</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getTargets</span><span class="p">();</span>
                <span class="nx">cognito</span><span class="p">.</span><span class="nx">hasSession</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">targets</span><span class="p">.</span><span class="nx">display</span><span class="p">(</span><span class="dl">"</span><span class="s2">login</span><span class="dl">"</span><span class="p">);</span>
                        <span class="k">return</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">targets</span><span class="p">.</span><span class="nx">display</span><span class="p">(</span><span class="dl">"</span><span class="s2">home</span><span class="dl">"</span><span class="p">);</span>
                <span class="p">});</span>
            <span class="p">},</span>
 
            <span class="cm">/* *** */</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<p>To encapsulate the cognito operations I’ve create a model called cognito.js. It’s not perfect, but it allows me to abstract cognito stuff in the OpenUI5 application.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">define</span><span class="p">([</span>
        <span class="dl">"</span><span class="s2">app/conf/env</span><span class="dl">"</span>
    <span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">env</span><span class="p">)</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>
 
        <span class="nx">AWSCognito</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">region</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">region</span><span class="p">;</span>
 
        <span class="kd">var</span> <span class="nx">poolData</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">UserPoolId</span><span class="p">:</span> <span class="nx">env</span><span class="p">.</span><span class="nx">UserPoolId</span><span class="p">,</span>
            <span class="na">ClientId</span><span class="p">:</span> <span class="nx">env</span><span class="p">.</span><span class="nx">ClientId</span>
        <span class="p">};</span>
 
        <span class="kd">var</span> <span class="nx">userPool</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWSCognito</span><span class="p">.</span><span class="nx">CognitoIdentityServiceProvider</span><span class="p">.</span><span class="nx">CognitoUserPool</span><span class="p">(</span><span class="nx">poolData</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">jwt</span><span class="p">;</span>
 
        <span class="kd">var</span> <span class="nx">cognito</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">getJwt</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">jwt</span><span class="p">;</span>
            <span class="p">},</span>
 
            <span class="na">hasSession</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">cbk</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">cognitoUser</span> <span class="o">=</span> <span class="nx">cognito</span><span class="p">.</span><span class="nx">getCurrentUser</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">cognitoUser</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">cognitoUser</span><span class="p">.</span><span class="nx">getSession</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">session</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">cbk</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
                            <span class="k">return</span><span class="p">;</span>
                        <span class="p">}</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">session</span><span class="p">.</span><span class="nx">isValid</span><span class="p">())</span> <span class="p">{</span>
                            <span class="nx">jwt</span> <span class="o">=</span> <span class="nx">session</span><span class="p">.</span><span class="nx">idToken</span><span class="p">.</span><span class="nx">getJwtToken</span><span class="p">();</span>
                            <span class="nx">cbk</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="nx">session</span><span class="p">)</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">cbk</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">cbk</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">},</span>
 
            <span class="na">getCurrentUser</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">userPool</span><span class="p">.</span><span class="nx">getCurrentUser</span><span class="p">();</span>
            <span class="p">},</span>
 
            <span class="na">signOut</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">currentUser</span> <span class="o">=</span> <span class="nx">cognito</span><span class="p">.</span><span class="nx">getCurrentUser</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">currentUser</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">currentUser</span><span class="p">.</span><span class="nx">signOut</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">},</span>
 
            <span class="na">getUsername</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">currentUser</span> <span class="o">=</span> <span class="nx">cognito</span><span class="p">.</span><span class="nx">getCurrentUser</span><span class="p">();</span>
                <span class="k">return</span> <span class="p">(</span><span class="nx">currentUser</span><span class="p">)</span> <span class="p">?</span> <span class="nx">currentUser</span><span class="p">.</span><span class="nx">username</span> <span class="p">:</span> <span class="kc">undefined</span><span class="p">;</span>
            <span class="p">},</span>
 
            <span class="na">getUserData</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="na">Username</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span>
                    <span class="na">Pool</span><span class="p">:</span> <span class="nx">userPool</span>
                <span class="p">};</span>
            <span class="p">},</span>
 
            <span class="na">getCognitoUser</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nx">AWSCognito</span><span class="p">.</span><span class="nx">CognitoIdentityServiceProvider</span><span class="p">.</span><span class="nx">CognitoUser</span><span class="p">(</span><span class="nx">cognito</span><span class="p">.</span><span class="nx">getUserData</span><span class="p">(</span><span class="nx">user</span><span class="p">));</span>
            <span class="p">},</span>
 
            <span class="na">authenticateUser</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">pass</span><span class="p">,</span> <span class="nx">cbk</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">authenticationData</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="na">Username</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span>
                    <span class="na">Password</span><span class="p">:</span> <span class="nx">pass</span>
                <span class="p">};</span>
 
                <span class="kd">var</span> <span class="nx">authenticationDetails</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWSCognito</span><span class="p">.</span><span class="nx">CognitoIdentityServiceProvider</span><span class="p">.</span><span class="nx">AuthenticationDetails</span><span class="p">(</span><span class="nx">authenticationData</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">cognitoUser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWSCognito</span><span class="p">.</span><span class="nx">CognitoIdentityServiceProvider</span><span class="p">.</span><span class="nx">CognitoUser</span><span class="p">(</span><span class="nx">cognito</span><span class="p">.</span><span class="nx">getUserData</span><span class="p">(</span><span class="nx">user</span><span class="p">));</span>
 
                <span class="nx">cognitoUser</span><span class="p">.</span><span class="nx">authenticateUser</span><span class="p">(</span><span class="nx">authenticationDetails</span><span class="p">,</span> <span class="nx">cbk</span><span class="p">);</span>
 
                <span class="k">return</span> <span class="nx">cognitoUser</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>
 
        <span class="k">return</span> <span class="nx">cognito</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The login route has the following xml view:</p>

<p><img src="/assets/images/home.png" alt="" /></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;core:View</span>
        <span class="na">xmlns:core=</span><span class="s">"sap.ui.core"</span>
        <span class="na">xmlns:f=</span><span class="s">"sap.ui.layout.form"</span>
        <span class="na">xmlns=</span><span class="s">"sap.m"</span>
        <span class="na">controllerName=</span><span class="s">"app.controller.Login"</span>
<span class="nt">&gt;</span>
    <span class="nt">&lt;Image</span> <span class="na">class=</span><span class="s">"bg"</span><span class="nt">&gt;&lt;/Image&gt;</span>
    <span class="nt">&lt;VBox</span> <span class="na">class=</span><span class="s">"sapUiSmallMargin loginForm"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;f:SimpleForm</span> <span class="na">visible=</span><span class="s">"{= ${/flow} === 'login' }"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;f:toolbar&gt;</span>
                <span class="nt">&lt;Toolbar&gt;</span>
                    <span class="nt">&lt;Title</span> <span class="na">text=</span><span class="s">"{i18n&gt;Login_Title}"</span> <span class="na">level=</span><span class="s">"H4"</span> <span class="na">titleStyle=</span><span class="s">"H4"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/Toolbar&gt;</span>
            <span class="nt">&lt;/f:toolbar&gt;</span>
            <span class="nt">&lt;f:content&gt;</span>
                <span class="nt">&lt;Label</span> <span class="na">text=</span><span class="s">"{i18n&gt;Login_user}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Input</span> <span class="na">placeholder=</span><span class="s">"{i18n&gt;Login_userPlaceholder}"</span> <span class="na">value=</span><span class="s">"{/user}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Label</span> <span class="na">text=</span><span class="s">"{i18n&gt;Login_pass}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Input</span> <span class="na">type=</span><span class="s">"Password"</span> <span class="na">placeholder=</span><span class="s">"{i18n&gt;Login_passPlaceholder}"</span> <span class="na">value=</span><span class="s">"{/pass}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Button</span> <span class="na">type=</span><span class="s">"Accept"</span> <span class="na">text=</span><span class="s">"{i18n&gt;OK}"</span> <span class="na">press=</span><span class="s">"loginPressHandle"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/f:content&gt;</span>
        <span class="nt">&lt;/f:SimpleForm&gt;</span>
         
        <span class="nt">&lt;f:SimpleForm</span> <span class="na">visible=</span><span class="s">"{= ${/flow} === 'PasswordReset' }"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;f:toolbar&gt;</span>
                <span class="nt">&lt;Toolbar&gt;</span>
                    <span class="nt">&lt;Title</span> <span class="na">text=</span><span class="s">"{i18n&gt;Login_PasswordReset}"</span> <span class="na">level=</span><span class="s">"H4"</span> <span class="na">titleStyle=</span><span class="s">"H4"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/Toolbar&gt;</span>
            <span class="nt">&lt;/f:toolbar&gt;</span>
            <span class="nt">&lt;f:content&gt;</span>
                <span class="nt">&lt;Label</span> <span class="na">text=</span><span class="s">"{i18n&gt;Login_verificationCode}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Input</span> <span class="na">type=</span><span class="s">"Number"</span> <span class="na">placeholder=</span><span class="s">"{i18n&gt;Login_verificationCodePlaceholder}"</span> <span class="na">value=</span><span class="s">"{/verificationCode}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Label</span> <span class="na">text=</span><span class="s">"{i18n&gt;Login_newpass}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Input</span> <span class="na">type=</span><span class="s">"Password"</span> <span class="na">placeholder=</span><span class="s">"{i18n&gt;Login_newpassPlaceholder}"</span> <span class="na">value=</span><span class="s">"{/newPass}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Button</span> <span class="na">type=</span><span class="s">"Accept"</span> <span class="na">text=</span><span class="s">"{i18n&gt;OK}"</span> <span class="na">press=</span><span class="s">"newPassVerificationPressHandle"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/f:content&gt;</span>
        <span class="nt">&lt;/f:SimpleForm&gt;</span>
         
        <span class="nt">&lt;f:SimpleForm</span> <span class="na">visible=</span><span class="s">"{= ${/flow} === 'newPasswordRequired' }"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;f:toolbar&gt;</span>
                <span class="nt">&lt;Toolbar&gt;</span>
                    <span class="nt">&lt;Title</span> <span class="na">text=</span><span class="s">"{i18n&gt;Login_PasswordReset}"</span> <span class="na">level=</span><span class="s">"H4"</span> <span class="na">titleStyle=</span><span class="s">"H4"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/Toolbar&gt;</span>
            <span class="nt">&lt;/f:toolbar&gt;</span>
            <span class="nt">&lt;f:content&gt;</span>
                <span class="nt">&lt;Label</span> <span class="na">text=</span><span class="s">"{i18n&gt;Login_newpass}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Input</span> <span class="na">type=</span><span class="s">"Password"</span> <span class="na">placeholder=</span><span class="s">"{i18n&gt;Login_newpassPlaceholder}"</span> <span class="na">value=</span><span class="s">"{/newPass}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;Button</span> <span class="na">type=</span><span class="s">"Accept"</span> <span class="na">text=</span><span class="s">"{i18n&gt;OK}"</span> <span class="na">press=</span><span class="s">"newPassPressHandle"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/f:content&gt;</span>
        <span class="nt">&lt;/f:SimpleForm&gt;</span>
    <span class="nt">&lt;/VBox&gt;</span>
<span class="nt">&lt;/core:View&gt;</span>
</code></pre></div></div>

<p>It has three different stages: “login”, “PasswordReset” and “newPasswordRequired” “login” is the main one. In this stage the user can input his login credentials. If credentials are OK then we’ll display home route. The first time a user log in in the application with the password provided by the administrator, Cognito will force to change the password. Then We’ll show newPasswordRequired flow. I’m not going to explain each step. We developers prefer code than texts. That’s the code:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">define</span><span class="p">([</span>
        <span class="dl">"</span><span class="s2">app/controller/BaseController</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">sap/ui/model/json/JSONModel</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">sap/m/MessageToast</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">app/model/cognito</span><span class="dl">"</span>
    <span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">BaseController</span><span class="p">,</span> <span class="nx">JSONModel</span><span class="p">,</span> <span class="nx">MessageToast</span><span class="p">,</span> <span class="nx">cognito</span><span class="p">)</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>
 
        <span class="kd">var</span> <span class="nx">cognitoUser</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">BaseController</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">app.controller.Login</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">model</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">user</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
                <span class="na">pass</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
                <span class="na">flow</span><span class="p">:</span> <span class="dl">"</span><span class="s2">login</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">verificationCode</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
                <span class="na">newPass</span><span class="p">:</span> <span class="kc">undefined</span>
            <span class="p">},</span>
 
            <span class="na">onInit</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">getView</span><span class="p">().</span><span class="nx">setModel</span><span class="p">(</span><span class="k">new</span> <span class="nx">JSONModel</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">));</span>
            <span class="p">},</span>
 
            <span class="na">newPassPressHandle</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">targets</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getOwnerComponent</span><span class="p">().</span><span class="nx">getTargets</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">attributesData</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
                <span class="nx">cognitoUser</span><span class="p">.</span><span class="nx">completeNewPasswordChallenge</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">newPass</span><span class="p">,</span> <span class="nx">attributesData</span><span class="p">,</span> <span class="p">{</span>
                    <span class="na">onFailure</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">MessageToast</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
                    <span class="p">},</span>
                    <span class="na">onSuccess</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">that</span><span class="p">.</span><span class="nx">getModel</span><span class="p">().</span><span class="nx">setProperty</span><span class="p">(</span><span class="dl">"</span><span class="s2">/flow</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">login</span><span class="dl">"</span><span class="p">);</span>
                        <span class="nx">targets</span><span class="p">.</span><span class="nx">display</span><span class="p">(</span><span class="dl">"</span><span class="s2">home</span><span class="dl">"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">})</span>
            <span class="p">},</span>
 
            <span class="na">newPassVerificationPressHandle</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">targets</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getOwnerComponent</span><span class="p">().</span><span class="nx">getTargets</span><span class="p">();</span>
                <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
                <span class="nx">cognito</span><span class="p">.</span><span class="nx">getCognitoUser</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">user</span><span class="p">).</span><span class="nx">confirmPassword</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">verificationCode</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">newPass</span><span class="p">,</span> <span class="p">{</span>
                    <span class="na">onFailure</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">MessageToast</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
                    <span class="p">},</span>
                    <span class="na">onSuccess</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">that</span><span class="p">.</span><span class="nx">getModel</span><span class="p">().</span><span class="nx">setProperty</span><span class="p">(</span><span class="dl">"</span><span class="s2">/flow</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">PasswordReset</span><span class="dl">"</span><span class="p">);</span>
                        <span class="nx">targets</span><span class="p">.</span><span class="nx">display</span><span class="p">(</span><span class="dl">"</span><span class="s2">home</span><span class="dl">"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">},</span>
 
            <span class="na">loginPressHandle</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">targets</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getOwnerComponent</span><span class="p">().</span><span class="nx">getTargets</span><span class="p">();</span>
                <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
                <span class="nx">cognitoUser</span> <span class="o">=</span> <span class="nx">cognito</span><span class="p">.</span><span class="nx">authenticateUser</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">user</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">pass</span><span class="p">,</span> <span class="p">{</span>
                    <span class="na">onSuccess</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">targets</span><span class="p">.</span><span class="nx">display</span><span class="p">(</span><span class="dl">"</span><span class="s2">home</span><span class="dl">"</span><span class="p">);</span>
                    <span class="p">},</span>
 
                    <span class="na">onFailure</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="k">switch</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">case</span> <span class="dl">"</span><span class="s2">PasswordResetRequiredException</span><span class="dl">"</span><span class="p">:</span>
                                <span class="nx">that</span><span class="p">.</span><span class="nx">getModel</span><span class="p">().</span><span class="nx">setProperty</span><span class="p">(</span><span class="dl">"</span><span class="s2">/flow</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">PasswordReset</span><span class="dl">"</span><span class="p">);</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="nl">default</span><span class="p">:</span>
                                <span class="nx">MessageToast</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">},</span>
 
                    <span class="na">newPasswordRequired</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">userAttributes</span><span class="p">,</span> <span class="nx">requiredAttributes</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">that</span><span class="p">.</span><span class="nx">getModel</span><span class="p">().</span><span class="nx">setProperty</span><span class="p">(</span><span class="dl">"</span><span class="s2">/flow</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">newPasswordRequired</span><span class="dl">"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The home route is the main one. It asumes that there’s an active Cognito session enabled.</p>

<p><img src="/assets/images/home-2.png" alt="" /></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mvc:View</span>
        <span class="na">controllerName=</span><span class="s">"app.controller.Home"</span>
        <span class="na">xmlns=</span><span class="s">"sap.m"</span>
        <span class="na">xmlns:mvc=</span><span class="s">"sap.ui.core.mvc"</span>
        <span class="na">xmlns:semantic=</span><span class="s">"sap.m.semantic"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;semantic:FullscreenPage</span>
            <span class="na">id=</span><span class="s">"page"</span>
            <span class="na">semanticRuleSet=</span><span class="s">"Optimized"</span>
            <span class="na">showNavButton=</span><span class="s">"false"</span>
            <span class="na">title=</span><span class="s">"{i18n&gt;loggedUser}: {/userName}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;semantic:content&gt;</span>
            <span class="nt">&lt;Panel</span> <span class="na">width=</span><span class="s">"auto"</span> <span class="na">class=</span><span class="s">"sapUiResponsiveMargin"</span> <span class="na">accessibleRole=</span><span class="s">"Region"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;headerToolbar&gt;</span>
                    <span class="nt">&lt;Toolbar</span> <span class="na">height=</span><span class="s">"3rem"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Title</span> <span class="na">text=</span><span class="s">"Title"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/Toolbar&gt;</span>
                <span class="nt">&lt;/headerToolbar&gt;</span>
                <span class="nt">&lt;content&gt;</span>
                    <span class="nt">&lt;Text</span> <span class="na">text=</span><span class="s">"Lorem ipsum dolor st amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;Button</span> <span class="na">text=</span><span class="s">"{i18n&gt;Hello}"</span> <span class="na">icon=</span><span class="s">"sap-icon://hello-world"</span> <span class="na">press=</span><span class="s">"helloPress"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/content&gt;</span>
            <span class="nt">&lt;/Panel&gt;</span>
        <span class="nt">&lt;/semantic:content&gt;</span>
        <span class="nt">&lt;semantic:customFooterContent&gt;</span>
            <span class="nt">&lt;Button</span> <span class="na">text=</span><span class="s">"{i18n&gt;LogOff}"</span> <span class="na">icon=</span><span class="s">"sap-icon://visits"</span> <span class="na">press=</span><span class="s">"onLogOffPress"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/semantic:customFooterContent&gt;</span>
    <span class="nt">&lt;/semantic:FullscreenPage&gt;</span>
<span class="nt">&lt;/mvc:View&gt;</span>
</code></pre></div></div>

<p>It shows the Cognito login name. It alos has a simple logff button and also one button that calls to the backend.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">define</span><span class="p">([</span>
        <span class="dl">"</span><span class="s2">app/controller/BaseController</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">sap/ui/model/json/JSONModel</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">sap/m/MessageToast</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">app/model/cognito</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">app/model/api</span><span class="dl">"</span>
    <span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">BaseController</span><span class="p">,</span> <span class="nx">JSONModel</span><span class="p">,</span> <span class="nx">MessageToast</span><span class="p">,</span> <span class="nx">cognito</span><span class="p">,</span> <span class="nx">api</span><span class="p">)</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>
 
        <span class="k">return</span> <span class="nx">BaseController</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">app.controller.Home</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">model</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">userName</span><span class="p">:</span> <span class="dl">""</span>
            <span class="p">},</span>
 
            <span class="na">onInit</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">userName</span> <span class="o">=</span> <span class="nx">cognito</span><span class="p">.</span><span class="nx">getUsername</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">getView</span><span class="p">().</span><span class="nx">setModel</span><span class="p">(</span><span class="k">new</span> <span class="nx">JSONModel</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">));</span>
            <span class="p">},</span>
 
            <span class="na">helloPress</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/hi</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">MessageToast</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello user </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">.</span><span class="nx">username</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> (</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">.</span><span class="nx">email</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">)</span><span class="dl">"</span><span class="p">);</span>
                <span class="p">});</span>
            <span class="p">},</span>
 
            <span class="na">onLogOffPress</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">cognito</span><span class="p">.</span><span class="nx">signOut</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">getOwnerComponent</span><span class="p">().</span><span class="nx">getTargets</span><span class="p">().</span><span class="nx">display</span><span class="p">(</span><span class="dl">"</span><span class="s2">login</span><span class="dl">"</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>
<p>To handle ajax requests I’ve create an api model. This model injects jwt inside every request.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">define</span><span class="p">([</span>
    <span class="dl">"</span><span class="s2">sap/m/MessageToast</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">app/model/cognito</span><span class="dl">"</span>
<span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">MessageToast</span><span class="p">,</span> <span class="nx">cognito</span><span class="p">)</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>
 
    <span class="kd">var</span> <span class="nx">backend</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
 
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">get</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">params</span> <span class="o">=</span> <span class="nx">params</span> <span class="o">||</span> <span class="p">{};</span>
            <span class="nx">params</span><span class="p">.</span><span class="nx">_jwt</span> <span class="o">=</span> <span class="nx">cognito</span><span class="p">.</span><span class="nx">getJwt</span><span class="p">();</span>
            <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
 
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">contentType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">data</span><span class="p">:</span> <span class="nx">params</span><span class="p">,</span>
                <span class="na">url</span><span class="p">:</span> <span class="nx">backend</span> <span class="o">+</span> <span class="nx">uri</span><span class="p">,</span>
                <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">async</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="na">success</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="nx">cb</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
                <span class="p">},</span>
                <span class="na">error</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">sap</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">BusyIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="k">switch</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">case</span> <span class="mi">403</span><span class="p">:</span> <span class="c1">// Forbidden</span>
                            <span class="nx">MessageToast</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="dl">'</span><span class="s1">Auth error</span><span class="dl">'</span><span class="p">);</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="nl">default</span><span class="p">:</span>
                            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">});</span>
</code></pre></div></div>

<p>That’s the frontend. Now it’s time to backend. Our Backend will be a simple Lumen server.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">App\Http\Middleware</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Contracts\Debug\ExceptionHandler</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Laravel\Lumen\Application</span><span class="p">;</span>
 
<span class="p">(</span><span class="k">new</span> <span class="nc">Dotenv\Dotenv</span><span class="p">(</span><span class="k">__DIR__</span> <span class="mf">.</span> <span class="s2">"/../env/"</span><span class="p">))</span><span class="o">-&gt;</span><span class="nf">load</span><span class="p">();</span>
 
<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Application</span><span class="p">();</span>
 
<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">singleton</span><span class="p">(</span><span class="nc">ExceptionHandler</span><span class="o">::</span><span class="n">class</span><span class="p">,</span> <span class="nc">App\Exceptions\Handler</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
 
<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">routeMiddleware</span><span class="p">([</span>
    <span class="s1">'cognito'</span> <span class="o">=&gt;</span> <span class="nc">Middleware\AuthCognitoMiddleware</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
<span class="p">]);</span>
 
<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">register</span><span class="p">(</span><span class="nc">App\Providers\RedisServiceProvider</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
 
<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">group</span><span class="p">([</span>
    <span class="s1">'middleware'</span> <span class="o">=&gt;</span> <span class="s1">'cognito'</span><span class="p">,</span>
    <span class="s1">'namespace'</span>  <span class="o">=&gt;</span> <span class="s1">'App\Http\Controllers'</span><span class="p">,</span>
<span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="kt">Application</span> <span class="nv">$app</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s2">"/api/hi"</span><span class="p">,</span> <span class="s2">"DemoController@hi"</span><span class="p">);</span>
<span class="p">});</span>
 
<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">run</span><span class="p">();</span>
</code></pre></div></div>

<p>As you can see I’ve created a middelware to handle the authentication. This middleware will check the jwt provided by the frontend. We will use “spomky-labs/jose” library to validate the token.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">namespace</span> <span class="nn">App\Http\Middleware</span><span class="p">;</span>
 
<span class="kn">use</span> <span class="nc">Closure</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Http\Request</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Jose\Factory\JWKFactory</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Jose\Loader</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Monolog\Logger</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Symfony\Component\Cache\Adapter\RedisAdapter</span><span class="p">;</span>
 
<span class="kd">class</span> <span class="nc">AuthCognitoMiddleware</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">handle</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="kt">Closure</span> <span class="nv">$next</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="nv">$payload</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getPayload</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'_jwt'</span><span class="p">),</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getJwtWebKeys</span><span class="p">());</span>
            <span class="nf">config</span><span class="p">([</span>
                <span class="s2">"userInfo"</span> <span class="o">=&gt;</span> <span class="p">[</span>
                    <span class="s1">'username'</span> <span class="o">=&gt;</span> <span class="nv">$payload</span><span class="p">[</span><span class="s1">'cognito:username'</span><span class="p">],</span>
                    <span class="s1">'email'</span>    <span class="o">=&gt;</span> <span class="nv">$payload</span><span class="p">[</span><span class="s1">'email'</span><span class="p">],</span>
                <span class="p">],</span>
            <span class="p">]);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="err">\</span><span class="nc">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$log</span> <span class="o">=</span> <span class="nf">app</span><span class="p">(</span><span class="nc">Logger</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
            <span class="nv">$log</span><span class="o">-&gt;</span><span class="nf">alert</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="nf">getMessage</span><span class="p">());</span>
 
            <span class="k">return</span> <span class="nf">response</span><span class="p">(</span><span class="s1">'Token Error'</span><span class="p">,</span> <span class="mi">403</span><span class="p">);</span>
        <span class="p">}</span>
 
        <span class="k">return</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    <span class="p">}</span>
 
    <span class="k">private</span> <span class="k">function</span> <span class="n">getJwtWebKeys</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$url</span>      <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
            <span class="s1">'https://cognito-idp.%s.amazonaws.com/%s/.well-known/jwks.json'</span><span class="p">,</span>
            <span class="nb">getenv</span><span class="p">(</span><span class="s1">'AWS_REGION'</span><span class="p">),</span>
            <span class="nb">getenv</span><span class="p">(</span><span class="s1">'AWS_COGNITO_POOL'</span><span class="p">)</span>
        <span class="p">);</span>
        <span class="nv">$cacheKey</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'JWKFactory-Content-%s'</span><span class="p">,</span> <span class="nb">hash</span><span class="p">(</span><span class="s1">'sha512'</span><span class="p">,</span> <span class="nv">$url</span><span class="p">));</span>
 
        <span class="nv">$cache</span> <span class="o">=</span> <span class="nf">app</span><span class="p">(</span><span class="nc">RedisAdapter</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
 
        <span class="nv">$item</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="nf">getItem</span><span class="p">(</span><span class="nv">$cacheKey</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="nf">isHit</span><span class="p">())</span> <span class="p">{</span>
            <span class="nv">$item</span><span class="o">-&gt;</span><span class="nf">set</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getContent</span><span class="p">(</span><span class="nv">$url</span><span class="p">));</span>
            <span class="nv">$item</span><span class="o">-&gt;</span><span class="nf">expiresAfter</span><span class="p">((</span><span class="n">int</span><span class="p">)</span><span class="nb">getenv</span><span class="p">(</span><span class="s2">"TTL_JWK_CACHE"</span><span class="p">));</span>
            <span class="nv">$cache</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>
        <span class="p">}</span>
 
        <span class="k">return</span> <span class="nc">JWKFactory</span><span class="o">::</span><span class="nf">createFromJKU</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">$cache</span><span class="p">);</span>
    <span class="p">}</span>
 
    <span class="k">private</span> <span class="k">function</span> <span class="n">getPayload</span><span class="p">(</span><span class="nv">$accessToken</span><span class="p">,</span> <span class="nv">$jwtWebKeys</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$loader</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">Loader</span><span class="p">();</span>
        <span class="nv">$jwt</span>     <span class="o">=</span> <span class="nv">$loader</span><span class="o">-&gt;</span><span class="nf">loadAndVerifySignatureUsingKeySet</span><span class="p">(</span><span class="nv">$accessToken</span><span class="p">,</span> <span class="nv">$jwtWebKeys</span><span class="p">,</span> <span class="p">[</span><span class="s1">'RS256'</span><span class="p">]);</span>
        <span class="nv">$payload</span> <span class="o">=</span> <span class="nv">$jwt</span><span class="o">-&gt;</span><span class="nf">getPayload</span><span class="p">();</span>
 
        <span class="k">return</span> <span class="nv">$payload</span><span class="p">;</span>
    <span class="p">}</span>
 
    <span class="k">private</span> <span class="k">function</span> <span class="n">getContent</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
        <span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="p">[</span>
            <span class="no">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="no">CURLOPT_URL</span>            <span class="o">=&gt;</span> <span class="nv">$url</span><span class="p">,</span>
            <span class="no">CURLOPT_SSL_VERIFYPEER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="no">CURLOPT_SSL_VERIFYHOST</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">]);</span>
        <span class="nv">$content</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
        <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
 
        <span class="k">return</span> <span class="nv">$content</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To validate jwt Cognito tokens we need to obtain JwtWebKeys from this url</p>

<p><code class="language-plaintext highlighter-rouge">https://cognito-idp.my_aws_region.amazonaws.com/my_aws_cognito_pool_id/.well-known/jwks.json</code></p>

<p>That means that we need to fetch this url within every backend request, and that’s not cool. spomky-labs/jose allows us to use a cache to avoid fetch the request again and again. This cache is an instance of something that implementes the interface Psr\Cache\CacheItemPoolInterface. I’m not going to create a Cache from scratch. I’m not crazy. I’ll use symfony/cache here with a Redis adapter</p>

<p>And basically that’s all. Full application in my <a href="https://github.com/gonzalo123/openUI5-cognito">github</a></p>

    </section>
    <p>
        <div class="page-share">
  <a href="https://twitter.com/intent/tweet?text=Authenticate+OpenUI5+applications+and+Lumen+backends+with+Amazon+Cognito+and+JWT%20%2F2017%2F12%2F11%2Fauthenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--twitter btn--small"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> <span>Tweet</span></a>
  <a href="https://www.linkedin.com/shareArticle?mini=true&url=%2F2017%2F12%2F11%2Fauthenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--linkedin btn--small"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> <span>LinkedIn</span></a>
  <a href="https://reddit.com/submit?title=Authenticate+OpenUI5+applications+and+Lumen+backends+with+Amazon+Cognito+and+JWT&url=%2F2017%2F12%2F11%2Fauthenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--reddit btn--small"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i> <span>Reddit</span></a>
</div>

    </p>
    
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
</article>

    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = '/2017/12/11/authenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = '/2017/12/11/authenticate-openui5-applications-and-lumen-backends-with-amazon-cognito-and-jwt'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };

      (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//https-gonzalo123-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
       })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




<div class="relatedPosts">

<h4>Related Posts:</h4>





  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    
      <div>
      <h5><a href="/2019/11/25/alexa-skill-and-account-linking-with-serverless-and-cognito/">Alexa skill and account linking with serverless and Cognito <span class="label label-default">cognito</span>  <span class="label label-default">javascript</span> </a></h5>
      </div>
      
      
    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    
      <div>
      <h5><a href="/2018/02/19/playing-with-ionic-lumen-firebase-google-maps-raspberry-pi-and-background-geolocation/">Playing with Ionic, Lumen, Firebase, Google maps, Raspberry Pi and background geolocation <span class="label label-default">javascript</span>  <span class="label label-default">php</span> </a></h5>
      </div>
      
      
    

  
    
    
    

    
      <div>
      <h5><a href="/2018/01/22/handling-amazon-sns-messages-with-php-lumen-and-cloudwatch/">Handling Amazon SNS messages with PHP, Lumen and CloudWatch <span class="label label-default">amazon</span>  <span class="label label-default">php</span> </a></h5>
      </div>
      
      
    

  
    
    
    

    

  
    
    
    

    

  
    
    
    

    
      <div>
      <h5><a href="/2017/10/23/playing-with-iot-mqtt-arduino-and-raspberry-pi-building-a-dashboard-with-openui5/">Playing with IoT, MQTT, Arduino and Raspberry Pi. Building a dashboard with OpenUI5 <span class="label label-default">javascript</span>  <span class="label label-default">openui5</span> </a></h5>
      </div>
      
      
        

</div>

      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2021 Gonzalo Ayuso. All rights reserved.</span>
</footer>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="/js/main.js?1617475232680250000"></script>

    </div>
  </body>
</html>
